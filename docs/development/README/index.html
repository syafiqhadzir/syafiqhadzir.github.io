<h1>Development Guide</h1>
<blockquote>
<p><strong>Complete guide for local development, testing, and contributing to this project</strong></p>
</blockquote>
<p><a href="../../README.md">ğŸ  Home</a> / <a href="../README.md">ğŸ“š Docs</a> / Development</p>
<hr>
<h2>Table of Contents</h2>
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#initial-setup">Initial Setup</a></li>
<li><a href="#development-workflow">Development Workflow</a></li>
<li><a href="#project-structure">Project Structure</a></li>
<li><a href="#build-system">Build System</a></li>
<li><a href="#quality-gates">Quality Gates</a></li>
<li><a href="#cicd-pipeline">CI/CD Pipeline</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<hr>
<h2>Prerequisites</h2>
<p>Ensure you have the following installed:</p>
<ul>
<li><strong>Node.js:</strong> v24.0.0 or higher</li>
<li><strong>npm:</strong> v10.0.0 or higher</li>
<li><strong>Git:</strong> Latest stable version</li>
<li><strong>Chrome:</strong> For Lighthouse and E2E testing (Cypress)</li>
</ul>
<h3>Verify Installation</h3>
<pre><code class="language-bash">node --version  # Should be v24.x or higher
npm --version   # Should be v10.x or higher
git --version
</code></pre>
<hr>
<h2>Initial Setup</h2>
<h3>1. Clone Repository</h3>
<pre><code class="language-bash">git clone https://github.com/syafiqhadzir/syafiqhadzir.github.io.git
cd syafiqhadzir.github.io
</code></pre>
<h3>2. Install Dependencies</h3>
<pre><code class="language-bash"># Clean install (recommended for consistency)
npm ci

# Or regular install
npm install
</code></pre>
<h3>3. Setup Git Hooks</h3>
<pre><code class="language-bash"># Install Husky pre-commit hooks
npm run prepare
</code></pre>
<p>This configures:</p>
<ul>
<li><strong>Pre-commit:</strong> Runs linting on staged files via <code>lint-staged</code></li>
<li><strong>Commit-msg:</strong> Validates commit message format (Conventional Commits)</li>
</ul>
<hr>
<h2>Development Workflow</h2>
<h3>Start Development Server</h3>
<pre><code class="language-bash">npm run dev
</code></pre>
<ul>
<li>Starts Eleventy with hot-reload</li>
<li>Compiles TypeScript files</li>
<li>Watches for changes in <code>src/</code>, <code>_includes/</code></li>
<li>Available at <code>http://localhost:8080</code></li>
</ul>
<h3>Making Changes</h3>
<ol>
<li>
<p><strong>Create a feature branch:</strong></p>
<pre><code class="language-bash">git checkout -b feature/your-feature-name
</code></pre>
</li>
<li>
<p><strong>Make your changes</strong> to source files</p>
</li>
<li>
<p><strong>Test locally:</strong></p>
<pre><code class="language-bash">npm run lint        # Check code style
npm run typecheck   # Verify TypeScript
npm run test:unit   # Run unit tests
</code></pre>
</li>
<li>
<p><strong>Commit using Conventional Commits:</strong></p>
<pre><code class="language-bash">git commit -m &quot;feat: add dark mode toggle&quot;
# Or: fix:, docs:, chore:, test:, refactor:
</code></pre>
</li>
<li>
<p><strong>Push and open PR:</strong></p>
<pre><code class="language-bash">git push origin feature/your-feature-name
</code></pre>
</li>
</ol>
<hr>
<h2>Project Structure</h2>
<pre><code>syafiqhadzir.github.io/
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ actions/
â”‚   â”‚   â””â”€â”€ bootstrap-env/     # Reusable composite action
â”‚   â””â”€â”€ workflows/             # CI/CD pipelines
â”‚       â”œâ”€â”€ pr-validation.yml  # Fast PR checks
â”‚       â”œâ”€â”€ nightly-quality.yml # Deep quality audit
â”‚       â””â”€â”€ deploy.yml         # Production deployment
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ filters/               # Nunjucks filters (TS)
â”‚   â”‚   â”œâ”€â”€ dateFormat.ts
â”‚   â”‚   â””â”€â”€ readingTime.ts
â”‚   â”œâ”€â”€ lib/                   # Build utilities
â”‚   â”‚   â”œâ”€â”€ lightningCss.ts
â”‚   â”‚   â””â”€â”€ svgoOptimize.ts
â”‚   â”œâ”€â”€ shortcodes/            # Nunjucks shortcodes
â”‚   â”‚   â””â”€â”€ ampImg.ts
â”‚   â””â”€â”€ transforms/            # Output transforms
â”‚       â”œâ”€â”€ cssGuard.ts        # AMP CSS validator
â”‚       â”œâ”€â”€ extremeMinify.ts   # Production minifier
â”‚       â””â”€â”€ htmlMinify.ts      # HTML compression
â”‚
â”œâ”€â”€ test/                      # Unit tests (Vitest)
â”œâ”€â”€ cypress/                   # E2E tests
â”œâ”€â”€ scripts/                   # CLI utilities
â”‚   â”œâ”€â”€ housekeeping.ts        # Maintenance scripts
â”‚   â”œâ”€â”€ validate-amp.ts        # AMP validation
â”‚   â””â”€â”€ parse-sonar-log.sh     # SonarCloud diagnostics
â”‚
â”œâ”€â”€ _includes/                 # Nunjucks templates
â”œâ”€â”€ docs/                      # Documentation
â””â”€â”€ _site/                     # Build output (gitignored)
</code></pre>
<hr>
<h2>Build System</h2>
<h3>Development Build</h3>
<pre><code class="language-bash">npm run dev
</code></pre>
<p>Runs incremental builds with hot-reload.</p>
<h3>Production Build</h3>
<pre><code class="language-bash">npm run build:prod
</code></pre>
<p>Performs:</p>
<ol>
<li>TypeScript compilation</li>
<li>Eleventy static site generation</li>
<li>Extreme minification (HTML, CSS, JS)</li>
<li>Size budget reporting</li>
</ol>
<h3>Build Configuration</h3>
<ul>
<li><strong>Eleventy Config:</strong> <code>eleventy.config.js</code></li>
<li><strong>TypeScript:</strong> <code>tsconfig.json</code></li>
<li><strong>Vitest:</strong> <code>vitest.config.ts</code></li>
<li><strong>Cypress:</strong> <code>cypress.config.ts</code></li>
</ul>
<hr>
<h2>Quality Gates</h2>
<p>All code must pass strict quality checks before merging.</p>
<h3>Linting</h3>
<pre><code class="language-bash"># JavaScript/TypeScript
npm run lint:js

# CSS/SCSS
npm run lint:css

# Both
npm run lint
</code></pre>
<p><strong>Standards:</strong></p>
<ul>
<li>ESLint with strict rules (SonarJS, Unicorn, Import)</li>
<li>Stylelint with SCSS standard config</li>
<li>Prettier for formatting</li>
</ul>
<h3>Type Checking</h3>
<pre><code class="language-bash">npm run typecheck
</code></pre>
<p><strong>Requirements:</strong></p>
<ul>
<li>Strict mode enabled</li>
<li>No <code>any</code> types allowed</li>
<li>All exports strongly typed</li>
</ul>
<h3>Testing</h3>
<p>See the <strong><a href="TESTING.md">Testing Guide</a></strong> for comprehensive testing documentation.</p>
<pre><code class="language-bash"># Unit tests (Vitest)
npm run test:unit

# E2E tests (Cypress)
npm run test:e2e

# Coverage report
npm run test:unit:coverage
</code></pre>
<p><strong>Coverage Requirements:</strong></p>
<ul>
<li>Statements: 80%</li>
<li>Branches: 80%</li>
<li>Functions: 80%</li>
<li>Lines: 80%</li>
</ul>
<h3>AMP Validation</h3>
<pre><code class="language-bash">npm run validate:amp
</code></pre>
<p>Verifies all HTML pages are valid Google AMP.</p>
<h3>Performance</h3>
<pre><code class="language-bash">npm run perf:local
</code></pre>
<p>Runs Lighthouse CI with strict budget:</p>
<ul>
<li>Performance: 100</li>
<li>Accessibility: 100</li>
<li>Best Practices: 100</li>
<li>SEO: 100</li>
</ul>
<hr>
<h2>CI/CD Pipeline</h2>
<h3>PR Validation (<code>pr-validation.yml</code>)</h3>
<p><strong>Triggers:</strong> Pull requests to <code>main</code></p>
<p><strong>Steps:</strong></p>
<ol>
<li>Lint check (ESLint, Stylelint, Prettier)</li>
<li>Type check</li>
<li>Unit tests</li>
<li>Build dry-run (fast mode)</li>
</ol>
<p><strong>SLA:</strong> ~3 minutes</p>
<h3>Nightly Quality (<code>nightly-quality.yml</code>)</h3>
<p><strong>Triggers:</strong></p>
<ul>
<li>Daily at midnight UTC</li>
<li>Manual workflow dispatch</li>
</ul>
<p><strong>Steps:</strong></p>
<ol>
<li>Full build</li>
<li>E2E tests (Cypress smoke + a11y)</li>
<li>SonarCloud scan with verbose diagnostics</li>
<li>Artifact upload</li>
</ol>
<p><strong>See:</strong> <a href="SONARCLOUD.md">SonarCloud Observability Guide</a></p>
<h3>Deployment (<code>deploy.yml</code>)</h3>
<p><strong>Triggers:</strong> Version tags (<code>v*</code>)</p>
<p><strong>Steps:</strong></p>
<ol>
<li>Full production build</li>
<li>Lighthouse CI audit</li>
<li>Deploy to GitHub Pages</li>
<li>Semantic release (CHANGELOG generation)</li>
</ol>
<hr>
<h2>Troubleshooting</h2>
<h3>Build Failures</h3>
<p><strong>Issue:</strong> TypeScript compilation errors</p>
<pre><code class="language-bash"># Clean and reinstall
rm -rf node_modules package-lock.json
npm ci
npm run compile:ts
</code></pre>
<p><strong>Issue:</strong> Eleventy build fails</p>
<pre><code class="language-bash"># Check for syntax errors in templates
npm run dev  # More verbose than build
</code></pre>
<h3>Test Failures</h3>
<p><strong>Issue:</strong> Unit tests fail locally</p>
<pre><code class="language-bash"># Clear test cache
npm run test:clean
npm run test:unit
</code></pre>
<p><strong>Issue:</strong> Cypress can't connect</p>
<pre><code class="language-bash"># Ensure server is running
npm run serve &amp;
npm run test:e2e
</code></pre>
<h3>Git Hooks Blocking Commits</h3>
<p><strong>Issue:</strong> Pre-commit hook fails</p>
<pre><code class="language-bash"># Fix linting issues
npm run lint

# Or bypass (not recommended)
git commit --no-verify
</code></pre>
<hr>
<h2>Related Documentation</h2>
<ul>
<li><strong><a href="TESTING.md">Testing Guide</a></strong> - Comprehensive testing documentation</li>
<li><strong><a href="SONARCLOUD.md">SonarCloud Observability</a></strong> - Quality monitoring and debugging</li>
<li><strong><a href="../../scripts/README.md">Scripts README</a></strong> - CLI utility documentation</li>
<li><strong><a href="../../CONTRIBUTING.md">CONTRIBUTING.md</a></strong> - Contribution guidelines</li>
</ul>
<hr>
<h2>External Resources</h2>
<ul>
<li><a href="https://www.11ty.dev/docs/">Eleventy Documentation</a></li>
<li><a href="https://amp.dev/documentation/">Google AMP Developer Guide</a></li>
<li><a href="https://www.typescriptlang.org/docs/">TypeScript Handbook</a></li>
<li><a href="https://www.conventionalcommits.org/">Conventional Commits</a></li>
</ul>
<hr>
<p><a href="#development-guide">â†‘ Back to Top</a></p>
